import{c as u,u as j,r as c,j as e,y as d,T as b,d as f,C as N,B as m,L as v}from"./index-BxGlouXT.js";import{t as A,p as w,g as k}from"./api-CPHYY_DM.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=u("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);function T(){const{user:t,hasPermission:n}=j(),[a,x]=c.useState({totalTeams:0,totalPlayers:0,totalGames:0,recentActivity:[]}),[p,h]=c.useState(!0);c.useEffect(()=>{g()},[]);const g=async()=>{try{const[s,l,i]=await Promise.all([A.getAll(),w.getAll(),k.getAll()]),y=l.players||l,o=i.games||i;x({totalTeams:s.length,totalPlayers:y.length,totalGames:o.length,recentActivity:o.slice(0,5)})}catch(s){console.error("Error loading admin stats:",s)}finally{h(!1)}};if(!n("ACCESS_ADMIN"))return e.jsxs("div",{className:"text-center py-12",children:[e.jsx(d,{className:"mx-auto h-12 w-12 text-red-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Access Denied"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You don't have permission to access the admin panel."})]});if(p)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})});const r=[{title:"Manage Teams",description:"Create and manage teams",icon:b,link:"/teams",color:"bg-green-500",count:a.totalTeams},{title:"Manage Players",description:"Add and edit player information",icon:f,link:"/players",color:"bg-blue-500",count:a.totalPlayers},{title:"Manage Games",description:"Schedule games and enter statistics",icon:N,link:"/games",color:"bg-purple-500",count:a.totalGames},{title:"View Analytics",description:"View detailed statistics and reports",icon:m,link:"/dashboard",color:"bg-orange-500",count:null}];return n("CHANGE_ROLES")&&r.push({title:"User Management",description:"Manage user roles and permissions",icon:C,link:"/admin/users",color:"bg-red-500",count:null}),n("ACCESS_ADMIN")&&r.push({title:"Upload Stats",description:"Upload player statistics from a file",icon:m,link:"/admin/stats-uploader",color:"bg-teal-500",count:null}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),e.jsxs("p",{className:"text-gray-600",children:["Welcome back, ",t==null?void 0:t.username]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{className:"h-5 w-5 text-orange-600"}),e.jsxs("span",{className:"text-sm font-medium text-orange-600",children:[(t==null?void 0:t.role.charAt(0).toUpperCase())+(t==null?void 0:t.role.slice(1))," Access"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(s=>e.jsxs(v,{to:s.link,className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${s.color}`,children:e.jsx(s.icon,{className:"h-6 w-6 text-white"})}),s.count!==null&&e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:s.count})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600",children:s.description})]},s.title))}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"})}),e.jsx("div",{className:"p-6",children:a.recentActivity.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"No recent activity."}):e.jsx("div",{className:"space-y-4",children:a.recentActivity.map(s=>{var l,i;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[((l=s.home_team)==null?void 0:l.name)||"TBD"," vs ",((i=s.away_team)==null?void 0:i.name)||"TBD"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[new Date(s.date).toLocaleDateString()," â€¢ ",s.location||"TBD"]})]}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.status==="completed"?"bg-green-100 text-green-800":s.status==="in_progress"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:s.status.replace("_"," ")})]},s.id)})})})]})]})}export{T as default};
